{
  "title": "List Comprehensions: Pythonic List Creation",
  "estimated_time": "30 minutes",
  "concept": "<p>Imagine you have a list of numbers [1, 2, 3, 4, 5] and want to create a new list with each number doubled.</p><h3>The Traditional Way (Verbose):</h3><pre><code>numbers = [1, 2, 3, 4, 5]\ndoubled = []\n\nfor num in numbers:\n    doubled.append(num * 2)\n\n# Result: [2, 4, 6, 8, 10]\n</code></pre><p>That's <strong>5 lines of code</strong> for a simple operation!</p><h3>The Python Way (List Comprehension):</h3><pre><code>numbers = [1, 2, 3, 4, 5]\ndoubled = [num * 2 for num in numbers]\n\n# Result: [2, 4, 6, 8, 10]\n</code></pre><p>That's <strong>1 line of code</strong> - same result!</p><h3>What is a List Comprehension?</h3><p>A <strong>list comprehension</strong> is a concise way to create lists. Instead of using loops and append(), you write the transformation inline.</p><pre><code># Pattern:\nnew_list = [expression for item in iterable]\n\n# Reads as: \"For each item in iterable, create expression\"\n</code></pre><h3>Why List Comprehensions?</h3><ul><li><strong>More concise</strong>: 1 line vs 3-5 lines</li><li><strong>More readable</strong>: Clear intent (once you learn the syntax)</li><li><strong>Faster</strong>: Optimized by Python interpreter</li><li><strong>Pythonic</strong>: Idiomatic Python style</li></ul><h3>Real-World Analogies:</h3><p>Think of it like a factory assembly line instruction:</p><pre style='background-color: #f0f0f0; padding: 10px;'>Traditional Way:\n  1. Create empty box\n  2. For each raw material:\n     a. Process it\n     b. Put result in box\n\nList Comprehension:\n  \"Put processed(material) in box for each material on conveyor\"\n  ↓\n  [processed(material) for material in conveyor]\n</pre><h3>Basic Syntax Patterns:</h3><h4>1. Transform (Map)</h4><pre><code># Double each number\n[num * 2 for num in numbers]\n\n# Uppercase each word\n[word.upper() for word in words]\n\n# Square each number  \n[x**2 for x in range(10)]\n</code></pre><h4>2. Filter</h4><pre><code># Get only even numbers\n[num for num in numbers if num % 2 == 0]\n\n# Get long words (>5 chars)\n[word for word in words if len(word) > 5]\n\n# Get positive numbers\n[x for x in numbers if x > 0]\n</code></pre><h4>3. Transform + Filter</h4><pre><code># Double only even numbers\n[num * 2 for num in numbers if num % 2 == 0]\n\n# Uppercase long words\n[word.upper() for word in words if len(word) > 5]\n</code></pre><h4>4. Conditional Expression (if-else)</h4><pre><code># Mark even/odd\n[\"even\" if num % 2 == 0 else \"odd\" for num in numbers]\n\n# Absolute values\n[x if x >= 0 else -x for x in numbers]\n</code></pre><h3>Syntax Breakdown:</h3><pre><code>[expression for item in iterable if condition]\n  ↓          ↓          ↓            ↓\n  What to    What to    Where from   Filter (optional)\n  create     call it\n</code></pre><h3>Examples:</h3><pre><code># Squares of 0-9\nsquares = [x**2 for x in range(10)]\n# [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]\n\n# Even squares only\neven_squares = [x**2 for x in range(10) if x % 2 == 0]\n# [0, 4, 16, 36, 64]\n\n# First letter of each word\nwords = [\"Apple\", \"Banana\", \"Cherry\"]\nfirst_letters = [word[0] for word in words]\n# ['A', 'B', 'C']\n\n# Length of each word\nlengths = [len(word) for word in words]\n# [5, 6, 6]\n</code></pre><h3>When NOT to Use List Comprehensions:</h3><ul><li>When logic is complex (hard to read)</li><li>When you need multiple statements</li><li>When side effects are needed (printing, file I/O)</li><li>When readability suffers</li></ul><pre><code># TOO COMPLEX (hard to read):\nresult = [x**2 if x % 2 == 0 else x**3 if x % 3 == 0 else x for x in range(100) if x > 10]\n\n# BETTER: Use regular loop\nresult = []\nfor x in range(100):\n    if x > 10:\n        if x % 2 == 0:\n            result.append(x**2)\n        elif x % 3 == 0:\n            result.append(x**3)\n        else:\n            result.append(x)\n</code></pre>",

  "code_example": {
    "code": "# List Comprehensions: Pythonic List Creation\n\nprint(\"=\" * 60)\nprint(\"LIST COMPREHENSIONS\")\nprint(\"=\" * 60)\nprint()\n\n# ========================================\n# BASIC TRANSFORMATIONS\n# ========================================\n\nprint(\"=== Basic Transformations ===\")\nprint()\n\n# Traditional way\nnumbers = [1, 2, 3, 4, 5]\nprint(f\"Original numbers: {numbers}\")\nprint()\n\nprint(\"Traditional approach (loop + append):\")\ndoubled_traditional = []\nfor num in numbers:\n    doubled_traditional.append(num * 2)\nprint(f\"  Code: for num in numbers: doubled.append(num * 2)\")\nprint(f\"  Result: {doubled_traditional}\")\n\nprint()\n\nprint(\"List comprehension:\")\ndoubled = [num * 2 for num in numbers]\nprint(f\"  Code: [num * 2 for num in numbers]\")\nprint(f\"  Result: {doubled}\")\n\nprint()\n\n# More examples\nsquares = [x**2 for x in range(1, 11)]\nprint(f\"Squares 1-10: {squares}\")\n\ncubes = [x**3 for x in range(1, 6)]\nprint(f\"Cubes 1-5: {cubes}\")\n\nprint()\n\n# ========================================\n# STRING OPERATIONS\n# ========================================\n\nprint(\"=== String Operations ===\")\nprint()\n\nwords = [\"python\", \"java\", \"javascript\", \"ruby\", \"go\"]\nprint(f\"Original words: {words}\")\nprint()\n\n# Uppercase all\nuppercase = [word.upper() for word in words]\nprint(f\"Uppercase: {uppercase}\")\n\n# Capitalize first letter\ncapitalized = [word.capitalize() for word in words]\nprint(f\"Capitalized: {capitalized}\")\n\n# Get first letter\nfirst_letters = [word[0] for word in words]\nprint(f\"First letters: {first_letters}\")\n\n# Get word lengths\nlengths = [len(word) for word in words]\nprint(f\"Lengths: {lengths}\")\n\n# Add exclamation mark\nexcited = [word + \"!\" for word in words]\nprint(f\"Excited: {excited}\")\n\nprint()\n\n# ========================================\n# FILTERING WITH IF\n# ========================================\n\nprint(\"=== Filtering with if ===\")\nprint()\n\nnumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nprint(f\"Numbers: {numbers}\")\nprint()\n\n# Even numbers only\nevens = [num for num in numbers if num % 2 == 0]\nprint(f\"Even numbers: {evens}\")\n\n# Odd numbers only\nodds = [num for num in numbers if num % 2 != 0]\nprint(f\"Odd numbers: {odds}\")\n\n# Numbers > 5\ngreater_than_5 = [num for num in numbers if num > 5]\nprint(f\"Greater than 5: {greater_than_5}\")\n\n# Numbers divisible by 3\ndivisible_by_3 = [num for num in numbers if num % 3 == 0]\nprint(f\"Divisible by 3: {divisible_by_3}\")\n\nprint()\n\n# Filter words\nwords = [\"apple\", \"banana\", \"cat\", \"dog\", \"elephant\", \"fig\"]\nprint(f\"Words: {words}\")\n\n# Long words (>5 chars)\nlong_words = [word for word in words if len(word) > 5]\nprint(f\"Long words (>5): {long_words}\")\n\n# Words starting with vowels\nvowel_words = [word for word in words if word[0] in 'aeiou']\nprint(f\"Start with vowel: {vowel_words}\")\n\nprint()\n\n# ========================================\n# TRANSFORM + FILTER\n# ========================================\n\nprint(\"=== Transform + Filter ===\")\nprint()\n\nnumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nprint(f\"Numbers: {numbers}\")\nprint()\n\n# Square even numbers only\neven_squares = [num**2 for num in numbers if num % 2 == 0]\nprint(f\"Squares of evens: {even_squares}\")\n\n# Double odd numbers only\nodd_doubled = [num * 2 for num in numbers if num % 2 != 0]\nprint(f\"Doubled odds: {odd_doubled}\")\n\nprint()\n\nwords = [\"Python\", \"Java\", \"C\", \"JavaScript\", \"Go\", \"Ruby\"]\nprint(f\"Words: {words}\")\n\n# Uppercase long words\nupper_long = [word.upper() for word in words if len(word) > 4]\nprint(f\"Uppercase long: {upper_long}\")\n\n# Lowercase short words\nlower_short = [word.lower() for word in words if len(word) <= 4]\nprint(f\"Lowercase short: {lower_short}\")\n\nprint()\n\n# ========================================\n# CONDITIONAL EXPRESSIONS (if-else)\n# ========================================\n\nprint(\"=== Conditional Expressions (if-else) ===\")\nprint()\n\nnumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nprint(f\"Numbers: {numbers}\")\nprint()\n\n# Label even/odd\nlabels = [\"even\" if num % 2 == 0 else \"odd\" for num in numbers]\nprint(f\"Labels: {labels}\")\n\n# Positive/negative/zero\nvalues = [-5, -2, 0, 3, 7]\nsigns = [\"positive\" if x > 0 else \"negative\" if x < 0 else \"zero\" for x in values]\nprint(f\"Values: {values}\")\nprint(f\"Signs: {signs}\")\n\nprint()\n\n# Cap at maximum\nscores = [45, 92, 105, 78, 110, 88]\nprint(f\"Raw scores: {scores}\")\ncapped = [score if score <= 100 else 100 for score in scores]\nprint(f\"Capped at 100: {capped}\")\n\nprint()\n\n# Absolute values\nnumbers = [-5, 3, -2, 7, -8, 1]\nprint(f\"Numbers: {numbers}\")\nabsolute = [x if x >= 0 else -x for x in numbers]\nprint(f\"Absolute: {absolute}\")\n\nprint()\n\n# ========================================\n# RANGE-BASED COMPREHENSIONS\n# ========================================\n\nprint(\"=== Range-Based Comprehensions ===\")\nprint()\n\n# First 10 squares\nsquares = [x**2 for x in range(10)]\nprint(f\"First 10 squares: {squares}\")\n\n# Even numbers 0-20\nevens = [x for x in range(21) if x % 2 == 0]\nprint(f\"Evens 0-20: {evens}\")\n\n# Multiples of 5 up to 50\nfives = [x for x in range(0, 51, 5)]\nprint(f\"Multiples of 5: {fives}\")\n\n# Or using multiplication\nfives_alt = [x * 5 for x in range(11)]\nprint(f\"Multiples of 5 (alt): {fives_alt}\")\n\nprint()\n\n# ========================================\n# NESTED LISTS (2D)\n# ========================================\n\nprint(\"=== Nested Lists (2D) ===\")\nprint()\n\n# Flatten a 2D list\nmatrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\nprint(f\"Matrix: {matrix}\")\n\nflattened = [num for row in matrix for num in row]\nprint(f\"Flattened: {flattened}\")\n\nprint()\n\n# Create multiplication table\nprint(\"Multiplication table (3x3):\")\ntable = [[row * col for col in range(1, 4)] for row in range(1, 4)]\nfor row in table:\n    print(f\"  {row}\")\n\nprint()\n\n# ========================================\n# PRACTICAL EXAMPLES\n# ========================================\n\nprint(\"=== Practical Example: Data Cleaning ===\")\nprint()\n\n# Clean user input\nuser_inputs = [\" Alice \", \"BOB\", \"  charlie  \", \"DIANA\", \"  eve\"]\nprint(f\"Raw inputs: {user_inputs}\")\n\n# Clean: strip whitespace and capitalize\ncleaned = [name.strip().capitalize() for name in user_inputs]\nprint(f\"Cleaned: {cleaned}\")\n\nprint()\n\nprint(\"=== Practical Example: Temperature Conversion ===\")\nprint()\n\ncelsius = [0, 10, 20, 30, 40, 100]\nprint(f\"Celsius: {celsius}\")\n\nfahrenheit = [(c * 9/5) + 32 for c in celsius]\nprint(f\"Fahrenheit: {fahrenheit}\")\n\nprint()\n\nprint(\"=== Practical Example: Extract Data ===\")\nprint()\n\nstudents = [\n    {\"name\": \"Alice\", \"grade\": 85},\n    {\"name\": \"Bob\", \"grade\": 92},\n    {\"name\": \"Charlie\", \"grade\": 78},\n    {\"name\": \"Diana\", \"grade\": 95}\n]\n\nprint(\"Student records:\")\nfor s in students:\n    print(f\"  {s}\")\n\nprint()\n\n# Extract all names\nnames = [student[\"name\"] for student in students]\nprint(f\"Names: {names}\")\n\n# Extract all grades\ngrades = [student[\"grade\"] for student in students]\nprint(f\"Grades: {grades}\")\n\n# Get names of students with A grades (>=90)\na_students = [student[\"name\"] for student in students if student[\"grade\"] >= 90]\nprint(f\"A students: {a_students}\")\n\nprint()\n\nprint(\"=== Practical Example: File Extensions ===\")\nprint()\n\nfilenames = [\"photo.jpg\", \"document.pdf\", \"song.mp3\", \"video.mp4\", \"image.png\"]\nprint(f\"Files: {filenames}\")\n\n# Extract extensions\nextensions = [filename.split('.')[-1] for filename in filenames]\nprint(f\"Extensions: {extensions}\")\n\n# Get image files only\nimages = [f for f in filenames if f.endswith(('.jpg', '.png'))]\nprint(f\"Images: {images}\")\n\nprint()\n\nprint(\"=== Practical Example: Generate Test Data ===\")\nprint()\n\n# Create 10 test user emails\nemails = [f\"user{i}@example.com\" for i in range(1, 11)]\nprint(\"Test emails:\")\nfor email in emails:\n    print(f\"  {email}\")\n\nprint()\n\n# Create coordinate pairs\ncoords = [(x, y) for x in range(3) for y in range(3)]\nprint(f\"3x3 grid coordinates: {coords}\")\n\nprint()\n\n# ========================================\n# COMPARISON: COMPREHENSION VS LOOP\n# ========================================\n\nprint(\"=== Comparison: Comprehension vs Loop ===\")\nprint()\n\nimport time\n\n# Test data\ntest_range = range(10000)\n\nprint(\"Creating list of squares for 10,000 numbers...\")\nprint()\n\n# Method 1: List comprehension\nstart = time.time()\nsquares_comp = [x**2 for x in test_range]\ncomp_time = time.time() - start\nprint(f\"List comprehension: {comp_time:.4f} seconds\")\n\n# Method 2: Traditional loop\nstart = time.time()\nsquares_loop = []\nfor x in test_range:\n    squares_loop.append(x**2)\nloop_time = time.time() - start\nprint(f\"Traditional loop:   {loop_time:.4f} seconds\")\n\nprint(f\"\\nList comprehension is {loop_time/comp_time:.1f}x faster!\")\n\nprint()\nprint(\"✓ List comprehensions are more concise AND faster!\")",
    "output": "============================================================\nLIST COMPREHENSIONS\n============================================================\n\n=== Basic Transformations ===\n\nOriginal numbers: [1, 2, 3, 4, 5]\n\nTraditional approach (loop + append):\n  Code: for num in numbers: doubled.append(num * 2)\n  Result: [2, 4, 6, 8, 10]\n\nList comprehension:\n  Code: [num * 2 for num in numbers]\n  Result: [2, 4, 6, 8, 10]\n\nSquares 1-10: [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]\nCubes 1-5: [1, 8, 27, 64, 125]\n\n=== String Operations ===\n\nOriginal words: ['python', 'java', 'javascript', 'ruby', 'go']\n\nUppercase: ['PYTHON', 'JAVA', 'JAVASCRIPT', 'RUBY', 'GO']\nCapitalized: ['Python', 'Java', 'Javascript', 'Ruby', 'Go']\nFirst letters: ['p', 'j', 'j', 'r', 'g']\nLengths: [6, 4, 10, 4, 2]\nExcited: ['python!', 'java!', 'javascript!', 'ruby!', 'go!']\n\n=== Filtering with if ===\n\nNumbers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\nEven numbers: [2, 4, 6, 8, 10]\nOdd numbers: [1, 3, 5, 7, 9]\nGreater than 5: [6, 7, 8, 9, 10]\nDivisible by 3: [3, 6, 9]\n\nWords: ['apple', 'banana', 'cat', 'dog', 'elephant', 'fig']\nLong words (>5): ['banana', 'elephant']\nStart with vowel: ['apple', 'elephant']\n\n=== Transform + Filter ===\n\nNumbers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\nSquares of evens: [4, 16, 36, 64, 100]\nDoubled odds: [2, 6, 10, 14, 18]\n\nWords: ['Python', 'Java', 'C', 'JavaScript', 'Go', 'Ruby']\nUppercase long: ['PYTHON', 'JAVASCRIPT']\nLowercase short: ['java', 'c', 'go', 'ruby']\n\n=== Conditional Expressions (if-else) ===\n\nNumbers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\nLabels: ['odd', 'even', 'odd', 'even', 'odd', 'even', 'odd', 'even', 'odd', 'even']\nValues: [-5, -2, 0, 3, 7]\nSigns: ['negative', 'negative', 'zero', 'positive', 'positive']\n\nRaw scores: [45, 92, 105, 78, 110, 88]\nCapped at 100: [45, 92, 100, 78, 100, 88]\n\nNumbers: [-5, 3, -2, 7, -8, 1]\nAbsolute: [5, 3, 2, 7, 8, 1]\n\n=== Range-Based Comprehensions ===\n\nFirst 10 squares: [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]\nEvens 0-20: [0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20]\nMultiples of 5: [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50]\nMultiples of 5 (alt): [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50]\n\n=== Nested Lists (2D) ===\n\nMatrix: [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\nFlattened: [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\nMultiplication table (3x3):\n  [1, 2, 3]\n  [2, 4, 6]\n  [3, 6, 9]\n\n=== Practical Example: Data Cleaning ===\n\nRaw inputs: [' Alice ', 'BOB', '  charlie  ', 'DIANA', '  eve']\nCleaned: ['Alice', 'Bob', 'Charlie', 'Diana', 'Eve']\n\n=== Practical Example: Temperature Conversion ===\n\nCelsius: [0, 10, 20, 30, 40, 100]\nFahrenheit: [32.0, 50.0, 68.0, 86.0, 104.0, 212.0]\n\n=== Practical Example: Extract Data ===\n\nStudent records:\n  {'name': 'Alice', 'grade': 85}\n  {'name': 'Bob', 'grade': 92}\n  {'name': 'Charlie', 'grade': 78}\n  {'name': 'Diana', 'grade': 95}\n\nNames: ['Alice', 'Bob', 'Charlie', 'Diana']\nGrades: [85, 92, 78, 95]\nA students: ['Bob', 'Diana']\n\n=== Practical Example: File Extensions ===\n\nFiles: ['photo.jpg', 'document.pdf', 'song.mp3', 'video.mp4', 'image.png']\nExtensions: ['jpg', 'pdf', 'mp3', 'mp4', 'png']\nImages: ['photo.jpg', 'image.png']\n\n=== Practical Example: Generate Test Data ===\n\nTest emails:\n  user1@example.com\n  user2@example.com\n  user3@example.com\n  user4@example.com\n  user5@example.com\n  user6@example.com\n  user7@example.com\n  user8@example.com\n  user9@example.com\n  user10@example.com\n\n3x3 grid coordinates: [(0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2)]\n\n=== Comparison: Comprehension vs Loop ===\n\nCreating list of squares for 10,000 numbers...\n\nList comprehension: 0.0008 seconds\nTraditional loop:   0.0012 seconds\n\nList comprehension is 1.5x faster!\n\n✓ List comprehensions are more concise AND faster!"
  },

  "syntax_breakdown": "<h3>List Comprehension Syntax:</h3><pre><code># Basic form:\n[expression for item in iterable]\n\n# With filter:\n[expression for item in iterable if condition]\n\n# With if-else (conditional expression):\n[expression_if_true if condition else expression_if_false for item in iterable]\n</code></pre><h3>Reading List Comprehensions:</h3><p>Read from LEFT to RIGHT (like English):</p><pre><code>[x * 2 for x in numbers if x > 0]\n ↓      ↓         ↓         ↓\n \"x*2\"  \"for x\"   \"in       \"if x > 0\"\n                  numbers\"\n\nReads as: \"Create x*2 for each x in numbers if x > 0\"\n</code></pre><h3>Form 1: Basic Transformation</h3><pre><code># Syntax:\n[expression for item in iterable]\n\n# Examples:\n[x * 2 for x in numbers]              # Double each\n[word.upper() for word in words]      # Uppercase each\n[x**2 for x in range(10)]             # Square 0-9\n[len(word) for word in words]         # Length of each\n</code></pre><h3>Form 2: With Filter (if)</h3><pre><code># Syntax:\n[expression for item in iterable if condition]\n\n# Examples:\n[x for x in numbers if x > 0]         # Positive only\n[x * 2 for x in numbers if x % 2 == 0] # Double evens\n[word for word in words if len(word) > 5] # Long words\n[x**2 for x in range(20) if x % 3 == 0] # Squares of multiples of 3\n</code></pre><p><strong>Note:</strong> The if at the END is a filter (removes items). No else allowed here!</p><h3>Form 3: Conditional Expression (if-else)</h3><pre><code># Syntax:\n[expr_if_true if condition else expr_if_false for item in iterable]\n\n# Examples:\n[\"even\" if x % 2 == 0 else \"odd\" for x in numbers]\n[x if x > 0 else 0 for x in numbers]  # Clip negatives to 0\n[word.upper() if len(word) > 5 else word.lower() for word in words]\n</code></pre><p><strong>Note:</strong> The if-else is BEFORE the for - it's a conditional expression, not a filter!</p><h3>Syntax Comparison:</h3><table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Pattern</th><th>Syntax</th><th>Purpose</th></tr><tr><td>Filter</td><td>[x for x in nums if x > 0]</td><td>Keep some items</td></tr><tr><td>Transform</td><td>[x*2 for x in nums]</td><td>Change all items</td></tr><tr><td>Transform + Filter</td><td>[x*2 for x in nums if x > 0]</td><td>Change and keep some</td></tr><tr><td>Conditional</td><td>[\"Y\" if x > 0 else \"N\" for x in nums]</td><td>Different transforms</td></tr></table><h3>Equivalent Loop Code:</h3><pre><code># List comprehension:\nresult = [x * 2 for x in numbers if x > 0]\n\n# Equivalent loop:\nresult = []\nfor x in numbers:\n    if x > 0:\n        result.append(x * 2)\n\n# Conditional expression:\nresult = [\"even\" if x % 2 == 0 else \"odd\" for x in numbers]\n\n# Equivalent loop:\nresult = []\nfor x in numbers:\n    if x % 2 == 0:\n        result.append(\"even\")\n    else:\n        result.append(\"odd\")\n</code></pre><h3>Nested List Comprehensions:</h3><pre><code># Flatten 2D list:\nmatrix = [[1, 2, 3], [4, 5, 6]]\nflat = [num for row in matrix for num in row]\n# [1, 2, 3, 4, 5, 6]\n\n# Reads as:\n# \"For each row in matrix, for each num in row, take num\"\n\n# Equivalent loop:\nflat = []\nfor row in matrix:\n    for num in row:\n        flat.append(num)\n\n# Create 2D list:\ntable = [[row * col for col in range(1, 4)] for row in range(1, 4)]\n# [[1, 2, 3], [2, 4, 6], [3, 6, 9]]\n</code></pre><h3>Common Patterns:</h3><pre><code># Squares of 0-9\nsquares = [x**2 for x in range(10)]\n\n# Even numbers 0-20\nevens = [x for x in range(21) if x % 2 == 0]\n\n# First letters\nfirst_letters = [word[0] for word in words]\n\n# Lengths\nlengths = [len(item) for item in items]\n\n# Uppercase all\nupper = [s.upper() for s in strings]\n\n# Strip whitespace\ncleaned = [s.strip() for s in strings]\n\n# Absolute values\nabsolute = [x if x >= 0 else -x for x in numbers]\n\n# Clamp to range\nclamped = [x if x <= 100 else 100 for x in scores]\n\n# Extract dict values\nnames = [person[\"name\"] for person in people]\n\n# Generate test data\nemails = [f\"user{i}@test.com\" for i in range(100)]\n</code></pre><h3>Common Mistakes:</h3><h4>1. Confusing Filter vs Conditional Expression</h4><pre><code># WRONG: Trying to use else with filter\n[x for x in numbers if x > 0 else 0]  # SyntaxError!\n\n# CORRECT: Use conditional expression\n[x if x > 0 else 0 for x in numbers]\n\n# Or use filter only:\n[x for x in numbers if x > 0]\n</code></pre><h4>2. Too Complex (Hard to Read)</h4><pre><code># TOO COMPLEX:\nresult = [x**2 if x > 0 else x**3 if x < 0 else 0 for x in numbers if abs(x) > 5]\n\n# BETTER: Use regular loop for clarity\nresult = []\nfor x in numbers:\n    if abs(x) > 5:\n        if x > 0:\n            result.append(x**2)\n        elif x < 0:\n            result.append(x**3)\n        else:\n            result.append(0)\n</code></pre><h4>3. Side Effects (Don't Use Comprehensions)</h4><pre><code># WRONG: Using comprehension for side effects\n[print(x) for x in numbers]  # Creates wasteful list!\n\n# CORRECT: Use regular loop\nfor x in numbers:\n    print(x)\n</code></pre><h3>When to Use List Comprehensions:</h3><table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Use When:</th><th>Don't Use When:</th></tr><tr><td>Simple transformation</td><td>Complex logic (>2 conditions)</td></tr><tr><td>Simple filter</td><td>Multiple statements needed</td></tr><tr><td>Creating new list</td><td>Side effects (print, write)</td></tr><tr><td>One line is clear</td><td>Readability suffers</td></tr><tr><td>Performance matters</td><td>Debugging needed</td></tr></table>",

  "exercise": {
    "instructions": "<p>Build a <strong>Data Processor</strong> that uses list comprehensions to transform and filter various datasets.</p><p><strong>Requirements:</strong></p><ol><li>Given a list of temperatures in Celsius, convert to Fahrenheit (formula: F = C * 9/5 + 32)</li><li>From a list of prices, apply 20% discount to items over $50</li><li>Clean a list of email addresses (strip whitespace, lowercase)</li><li>From student scores, extract passing grades (>=60) and calculate letter grades</li><li>Generate a multiplication table (5x5) using nested comprehension</li><li>From a sentence, get words longer than 4 characters, uppercased</li><li>Create list of tuples: (number, square, cube) for numbers 1-10</li></ol><p><strong>Example Output:</strong></p><pre>=== Data Processor ===\"\n\n1. Temperature Conversion:\n   Celsius: [0, 10, 20, 30, 40]\n   Fahrenheit: [32.0, 50.0, 68.0, 86.0, 104.0]\n\n2. Price Discounts:\n   Original: [45.00, 60.00, 25.00, 80.00, 55.00]\n   Discounted: [45.00, 48.00, 25.00, 64.00, 44.00]\n\n3. Email Cleaning:\n   Raw: [' Alice@EXAMPLE.com ', 'BOB@test.COM', '  charlie@mail.org']\n   Clean: ['alice@example.com', 'bob@test.com', 'charlie@mail.org']\n\n4. Grade Processing:\n   Scores: [85, 92, 55, 78, 95, 45, 88]\n   Passing: [85, 92, 78, 95, 88]\n   Letters: ['B', 'A', 'C', 'A', 'B']\n\n5. Multiplication Table (5x5):\n   [1, 2, 3, 4, 5]\n   [2, 4, 6, 8, 10]\n   [3, 6, 9, 12, 15]\n   [4, 8, 12, 16, 20]\n   [5, 10, 15, 20, 25]\n\n6. Long Words:\n   Sentence: \"The quick brown fox jumps over the lazy dog\"\n   Long words (>4): ['QUICK', 'BROWN', 'JUMPS']\n\n7. Number Data:\n   [(1, 1, 1), (2, 4, 8), (3, 9, 27), (4, 16, 64), (5, 25, 125), ...]\n</pre>",
    "starter_code": "# Data Processor - Starter Code\n\nprint(\"=== Data Processor ===\")\nprint()\n\n# 1. Temperature Conversion\ncelsius = [0, 10, 20, 30, 40]\nprint(\"1. Temperature Conversion:\")\nprint(f\"   Celsius: {celsius}\")\n\n# YOUR CODE: Convert to Fahrenheit using comprehension\nfahrenheit = [  # Formula: C * 9/5 + 32\nprint(f\"   Fahrenheit: {fahrenheit}\")\n\nprint()\n\n# 2. Price Discounts\nprices = [45.00, 60.00, 25.00, 80.00, 55.00]\nprint(\"2. Price Discounts:\")\nprint(f\"   Original: {prices}\")\n\n# YOUR CODE: Apply 20% discount to items > $50, keep others same\ndiscounted = [  # if price > 50, multiply by 0.8, else keep same\nprint(f\"   Discounted: {discounted}\")\n\nprint()\n\n# 3. Email Cleaning\nemails_raw = [' Alice@EXAMPLE.com ', 'BOB@test.COM', '  charlie@mail.org']\nprint(\"3. Email Cleaning:\")\nprint(f\"   Raw: {emails_raw}\")\n\n# YOUR CODE: Strip whitespace and lowercase\nemails_clean = [  # Use .strip() and .lower()\nprint(f\"   Clean: {emails_clean}\")\n\nprint()\n\n# 4. Grade Processing\nscores = [85, 92, 55, 78, 95, 45, 88]\nprint(\"4. Grade Processing:\")\nprint(f\"   Scores: {scores}\")\n\n# YOUR CODE: Get passing grades only (>=60)\npassing = [\nprint(f\"   Passing: {passing}\")\n\n# YOUR CODE: Convert passing grades to letters\n# A: >=90, B: >=80, C: >=70, D: >=60\nletters = [  # Use nested if-else\nprint(f\"   Letters: {letters}\")\n\nprint()\n\n# 5. Multiplication Table\nprint(\"5. Multiplication Table (5x5):\")\n\n# YOUR CODE: Create 5x5 table using nested comprehension\ntable = [  # [[row*col for col in range(1,6)] for row in range(1,6)]\nfor row in table:\n    print(f\"   {row}\")\n\nprint()\n\n# 6. Long Words\nsentence = \"The quick brown fox jumps over the lazy dog\"\nprint(\"6. Long Words:\")\nprint(f\"   Sentence: {sentence}\")\n\nwords = sentence.split()  # Split into list of words\n\n# YOUR CODE: Get words > 4 chars, uppercased\nlong_words = [\nprint(f\"   Long words (>4): {long_words}\")\n\nprint()\n\n# 7. Number Data Tuples\nprint(\"7. Number Data:\")\n\n# YOUR CODE: Create list of (number, square, cube) tuples for 1-10\nnumber_data = [  # (n, n**2, n**3)\nprint(f\"   {number_data}\")",
    "hint": "For Fahrenheit: [(c * 9/5) + 32 for c in celsius]. For discounts: [p * 0.8 if p > 50 else p for p in prices]. For emails: [e.strip().lower() for e in emails_raw]. For passing: [s for s in scores if s >= 60]. For letters: ['A' if s >= 90 else 'B' if s >= 80 else 'C' if s >= 70 else 'D' for s in passing]. For table: [[r*c for c in range(1,6)] for r in range(1,6)]. For long words: [w.upper() for w in words if len(w) > 4]. For tuples: [(n, n**2, n**3) for n in range(1, 11)]."
  },

  "solution": {
    "code": "# Data Processor - COMPLETE SOLUTION\n\nprint(\"=== Data Processor ===\")\nprint()\n\n# 1. Temperature Conversion\ncelsius = [0, 10, 20, 30, 40]\nprint(\"1. Temperature Conversion:\")\nprint(f\"   Celsius: {celsius}\")\n\nfahrenheit = [(c * 9/5) + 32 for c in celsius]\nprint(f\"   Fahrenheit: {fahrenheit}\")\n\nprint()\n\n# 2. Price Discounts\nprices = [45.00, 60.00, 25.00, 80.00, 55.00]\nprint(\"2. Price Discounts:\")\nprint(f\"   Original: {prices}\")\n\ndiscounted = [price * 0.8 if price > 50 else price for price in prices]\nprint(f\"   Discounted: {discounted}\")\n\nprint()\n\n# 3. Email Cleaning\nemails_raw = [' Alice@EXAMPLE.com ', 'BOB@test.COM', '  charlie@mail.org']\nprint(\"3. Email Cleaning:\")\nprint(f\"   Raw: {emails_raw}\")\n\nemails_clean = [email.strip().lower() for email in emails_raw]\nprint(f\"   Clean: {emails_clean}\")\n\nprint()\n\n# 4. Grade Processing\nscores = [85, 92, 55, 78, 95, 45, 88]\nprint(\"4. Grade Processing:\")\nprint(f\"   Scores: {scores}\")\n\npassing = [score for score in scores if score >= 60]\nprint(f\"   Passing: {passing}\")\n\nletters = ['A' if s >= 90 else 'B' if s >= 80 else 'C' if s >= 70 else 'D' for s in passing]\nprint(f\"   Letters: {letters}\")\n\nprint()\n\n# 5. Multiplication Table\nprint(\"5. Multiplication Table (5x5):\")\n\ntable = [[row * col for col in range(1, 6)] for row in range(1, 6)]\nfor row in table:\n    print(f\"   {row}\")\n\nprint()\n\n# 6. Long Words\nsentence = \"The quick brown fox jumps over the lazy dog\"\nprint(\"6. Long Words:\")\nprint(f\"   Sentence: {sentence}\")\n\nwords = sentence.split()\nlong_words = [word.upper() for word in words if len(word) > 4]\nprint(f\"   Long words (>4): {long_words}\")\n\nprint()\n\n# 7. Number Data Tuples\nprint(\"7. Number Data:\")\n\nnumber_data = [(n, n**2, n**3) for n in range(1, 11)]\nprint(f\"   {number_data}\")",
    "explanation": "<h3>How the Solution Works:</h3><h4>1. Temperature Conversion (Transform)</h4><pre><code>fahrenheit = [(c * 9/5) + 32 for c in celsius]\n\n# For each Celsius value, apply formula:\n# 0°C  → (0 * 9/5) + 32 = 32°F\n# 10°C → (10 * 9/5) + 32 = 50°F\n# ...\n</code></pre><h4>2. Price Discounts (Conditional Expression)</h4><pre><code>discounted = [price * 0.8 if price > 50 else price for price in prices]\n\n# Breakdown:\n# price * 0.8 if price > 50  ← 20% discount for expensive items\n# else price                 ← Keep cheap items same\n# for price in prices        ← For each price\n\n# Example:\n# $45 → Not > $50 → Keep $45\n# $60 → > $50 → $60 * 0.8 = $48\n</code></pre><h4>3. Email Cleaning (Method Chaining)</h4><pre><code>emails_clean = [email.strip().lower() for email in emails_raw]\n\n# For each email:\n# 1. .strip() removes whitespace\n# 2. .lower() converts to lowercase\n\n# Example:\n# ' Alice@EXAMPLE.com ' → 'Alice@EXAMPLE.com' → 'alice@example.com'\n</code></pre><h4>4. Grade Processing (Filter + Transform)</h4><pre><code># Step 1: Filter passing grades\npassing = [score for score in scores if score >= 60]\n# [85, 92, 78, 95, 88] ← Only these pass\n\n# Step 2: Convert to letters (nested if-else)\nletters = [\n    'A' if s >= 90 else          # ≥90 → A\n    'B' if s >= 80 else          # 80-89 → B  \n    'C' if s >= 70 else          # 70-79 → C\n    'D'                          # 60-69 → D\n    for s in passing\n]\n\n# Evaluation for each score:\n# 85: Not ≥90, is ≥80 → 'B'\n# 92: Is ≥90 → 'A'\n# 78: Not ≥90, not ≥80, is ≥70 → 'C'\n</code></pre><h4>5. Multiplication Table (Nested Comprehension)</h4><pre><code>table = [[row * col for col in range(1, 6)] for row in range(1, 6)]\n\n# Outer comprehension creates each row:\n# for row in range(1, 6)  → row = 1, 2, 3, 4, 5\n\n# Inner comprehension creates columns in that row:\n# [row * col for col in range(1, 6)]\n\n# Example for row=2:\n# [2*1, 2*2, 2*3, 2*4, 2*5] = [2, 4, 6, 8, 10]\n\n# Full result:\n# [[1,2,3,4,5],   ← row 1\n#  [2,4,6,8,10],  ← row 2\n#  ...]\n</code></pre><h4>6. Long Words (Filter + Transform)</h4><pre><code>long_words = [word.upper() for word in words if len(word) > 4]\n\n# 1. Filter: if len(word) > 4\n#    \"quick\" (5 chars) ✓\n#    \"fox\" (3 chars) ✗\n#    \"jumps\" (5 chars) ✓\n\n# 2. Transform: word.upper()\n#    \"quick\" → \"QUICK\"\n#    \"jumps\" → \"JUMPS\"\n</code></pre><h4>7. Number Data (Create Tuples)</h4><pre><code>number_data = [(n, n**2, n**3) for n in range(1, 11)]\n\n# For each n from 1 to 10, create tuple:\n# n=1: (1, 1, 1)\n# n=2: (2, 4, 8)\n# n=3: (3, 9, 27)\n# ...\n</code></pre><h3>Key Techniques Demonstrated:</h3><table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Exercise</th><th>Technique</th><th>Pattern</th></tr><tr><td>1. Temperature</td><td>Transform</td><td>[expr for x in list]</td></tr><tr><td>2. Discounts</td><td>Conditional expr</td><td>[a if cond else b for x in list]</td></tr><tr><td>3. Emails</td><td>Method chain</td><td>[x.method1().method2() for x in list]</td></tr><tr><td>4. Grades</td><td>Filter + Nested if-else</td><td>[expr if c1 else expr if c2... for x in list if filter]</td></tr><tr><td>5. Table</td><td>Nested comprehension</td><td>[[inner for ...] for outer ...]</td></tr><tr><td>6. Words</td><td>Filter + Transform</td><td>[expr for x in list if cond]</td></tr><tr><td>7. Tuples</td><td>Create tuples</td><td>[(a, b, c) for x in list]</td></tr></table><h3>Alternative Implementations:</h3><h4>Without Comprehensions (Traditional):</h4><pre><code># Exercise 2: Discounts\ndiscounted = []\nfor price in prices:\n    if price > 50:\n        discounted.append(price * 0.8)\n    else:\n        discounted.append(price)\n\n# Exercise 4: Letters\nletters = []\nfor s in passing:\n    if s >= 90:\n        letters.append('A')\n    elif s >= 80:\n        letters.append('B')\n    elif s >= 70:\n        letters.append('C')\n    else:\n        letters.append('D')\n\n# List comprehension is much more concise!\n</code></pre>"
  },

  "key_takeaways": "<ul><li><strong>List comprehensions</strong> create lists concisely in one line</li><li><strong>Syntax</strong>: [expression for item in iterable]</li><li><strong>With filter</strong>: [expr for item in iter if condition]</li><li><strong>Conditional expression</strong>: [expr_if_true if cond else expr_if_false for item in iter]</li><li><strong>Faster than loops</strong>: Optimized by Python</li><li><strong>More Pythonic</strong>: Idiomatic Python style</li><li><strong>Read left to right</strong>: \"Create expr for each item in iter if condition\"</li><li><strong>Nested comprehensions</strong>: [[inner] for outer]</li><li><strong>Don't overuse</strong>: Complex logic should use regular loops</li></ul><h3>Essential Patterns:</h3><pre><code># Transform all items\n[x * 2 for x in numbers]\n\n# Filter items\n[x for x in numbers if x > 0]\n\n# Transform + filter\n[x * 2 for x in numbers if x > 0]\n\n# Conditional expression\n[\"even\" if x % 2 == 0 else \"odd\" for x in numbers]\n\n# String operations\n[s.upper() for s in strings]\n[s.strip() for s in strings]\n[len(s) for s in strings]\n\n# From range\n[x**2 for x in range(10)]\n\n# Extract from dicts\n[person[\"name\"] for person in people]\n\n# Flatten 2D\n[item for row in matrix for item in row]\n\n# Create 2D\n[[r*c for c in range(n)] for r in range(n)]\n</code></pre><h3>Comprehension vs Loop:</h3><table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Feature</th><th>List Comprehension</th><th>Regular Loop</th></tr><tr><td>Lines</td><td>1</td><td>3-5</td></tr><tr><td>Speed</td><td>Faster</td><td>Slower</td></tr><tr><td>Readability</td><td>High (when simple)</td><td>High (when complex)</td></tr><tr><td>Debugging</td><td>Harder</td><td>Easier</td></tr><tr><td>Side effects</td><td>Not recommended</td><td>OK</td></tr></table><h3>When to Use:</h3><p><strong>Use comprehensions for:</strong></p><ul><li>Simple transformations</li><li>Simple filters</li><li>Creating new lists</li><li>Pythonic/readable one-liners</li></ul><p><strong>Use regular loops for:</strong></p><ul><li>Complex logic (>2 conditions)</li><li>Multiple statements</li><li>Side effects (print, file I/O)</li><li>When debugging</li><li>When readability suffers</li></ul><h3>Before Moving On:</h3><p>Make sure you can:</p><ul><li>Write basic transformations [x*2 for x in nums]</li><li>Add filters [x for x in nums if x > 0]</li><li>Use conditional expressions [a if cond else b for x in nums]</li><li>Understand the syntax and execution order</li><li>Know when NOT to use comprehensions</li></ul><h3>Module 5 Almost Complete!</h3><p>You've mastered:</p><ul><li>✅ List basics (indexing, slicing)</li><li>✅ List methods (append, remove, sort...)</li><li>✅ List slicing ([start:stop:step])</li><li>✅ Tuples (immutable sequences)</li><li>✅ List comprehensions (Pythonic list creation)</li></ul><h3>Coming Up: Module 5 Final Lesson</h3><p>In <strong>Lesson 6: Mini-Project - Advanced List Operations</strong>, you'll build a complete data analysis program combining all Module 5 concepts!</p>",

  "checkpoint_quiz": [
    {
      "question": "What does this list comprehension create?\n\n[x * 2 for x in range(5)]",
      "options": [
        "[0, 1, 2, 3, 4]",
        "[0, 2, 4, 6, 8]",
        "[2, 4, 6, 8, 10]",
        "[1, 2, 3, 4, 5]"
      ],
      "correct_answer": 1,
      "explanation": "The result is [0, 2, 4, 6, 8]. range(5) generates 0, 1, 2, 3, 4, and each is multiplied by 2. So: 0*2=0, 1*2=2, 2*2=4, 3*2=6, 4*2=8. List comprehensions transform each item in the iterable according to the expression."
    },
    {
      "question": "What's the difference between these two?\n\nA: [x for x in numbers if x > 0]\nB: [x if x > 0 else 0 for x in numbers]",
      "options": [
        "They're identical",
        "A filters items, B transforms all items",
        "A transforms, B filters",
        "Neither will work"
      ],
      "correct_answer": 1,
      "explanation": "A filters (removes items that don't match), keeping only positive numbers. B transforms ALL items: positive numbers stay as-is, but negative/zero numbers become 0. The 'if' at the END (A) is a filter. The 'if-else' BEFORE the 'for' (B) is a conditional expression that transforms every item."
    },
    {
      "question": "Which comprehension is equivalent to this loop?\n\nresult = []\nfor x in numbers:\n    if x % 2 == 0:\n        result.append(x**2)",
      "options": [
        "[x**2 for x in numbers]",
        "[x**2 for x in numbers if x % 2 == 0]",
        "[x**2 if x % 2 == 0 for x in numbers]",
        "[x for x in numbers if x**2 % 2 == 0]"
      ],
      "correct_answer": 1,
      "explanation": "Option B is correct: [x**2 for x in numbers if x % 2 == 0]. This filters for even numbers (if x % 2 == 0) then squares them (x**2). The 'if' at the end is a filter that keeps only items matching the condition, then the expression transforms those items."
    }
  ]
}
