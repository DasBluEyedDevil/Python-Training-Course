{
  "lesson_id": "12_04",
  "title": "Advanced Comprehensions",
  "module_id": 12,
  "order_index": 4,
  "description": "Master list, dictionary, and set comprehensions. Learn conditional logic, nested comprehensions, and when to use comprehensions vs loops for readable, Pythonic code.",
  "estimated_minutes": 30,
  "content_blocks": [
    {
      "type": "the_simplifier",
      "title": "The Concept: Compact List Creation",
      "content": "**Comprehensions = Concise collection creation**\n\n**Think of a shopping list:**\n\n❌ **Traditional approach (loop):**\n```python\nshopping_list = []\nfor item in all_items:\n    if item.price < 10:\n        shopping_list.append(item.name)\n```\n\n✅ **Comprehension (one line):**\n```python\nshopping_list = [item.name for item in all_items if item.price < 10]\n```\n\n**Types of comprehensions:**\n\n1. **List comprehension** `[...]`\n   ```python\n   squares = [x**2 for x in range(10)]\n   ```\n\n2. **Dictionary comprehension** `{key: value}`\n   ```python\n   squares_dict = {x: x**2 for x in range(10)}\n   ```\n\n3. **Set comprehension** `{value}`\n   ```python\n   unique_lengths = {len(word) for word in words}\n   ```\n\n4. **Generator expression** `(...)`\n   ```python\n   squares_gen = (x**2 for x in range(10))\n   ```\n\n**When to use comprehensions:**\n- ✅ Simple transformations\n- ✅ Filtering collections\n- ✅ Creating new collections\n- ❌ Complex logic (use regular loops)\n- ❌ Side effects (printing, file I/O)\n\n**Benefits:**\n- More readable (when simple)\n- Often faster\n- More Pythonic\n- Less code"
    },
    {
      "type": "the_coder",
      "title": "Code Example: List Comprehensions",
      "code": "print(\"=== Basic List Comprehension ===\")\n\n# Traditional loop\nsquares_loop = []\nfor x in range(10):\n    squares_loop.append(x**2)\nprint(f\"Loop: {squares_loop}\")\n\n# List comprehension\nsquares_comp = [x**2 for x in range(10)]\nprint(f\"Comprehension: {squares_comp}\")\n\nprint(\"\\n=== Comprehension with Condition (Filter) ===\")\n\n# Only even numbers\nevens = [x for x in range(20) if x % 2 == 0]\nprint(f\"Evens: {evens}\")\n\n# Only positive numbers\nnumbers = [-5, -3, -1, 0, 2, 4, 6]\npositive = [x for x in numbers if x > 0]\nprint(f\"Positive: {positive}\")\n\n# Words longer than 3 characters\nwords = ['a', 'the', 'cat', 'in', 'hat', 'python', 'is', 'cool']\nlong_words = [word for word in words if len(word) > 3]\nprint(f\"Long words: {long_words}\")\n\nprint(\"\\n=== Comprehension with Transformation ===\")\n\n# Uppercase all words\nupper_words = [word.upper() for word in words]\nprint(f\"Uppercase: {upper_words}\")\n\n# Length of each word\nword_lengths = [len(word) for word in words]\nprint(f\"Lengths: {word_lengths}\")\n\n# Complex transformation\nusers = ['alice', 'bob', 'charlie']\nuser_info = [f\"User: {name.title()} ({len(name)} chars)\" for name in users]\nprint(f\"User info: {user_info}\")\n\nprint(\"\\n=== Comprehension with if-else (Transform) ===\")\n\n# Classify numbers as even or odd\nnumbers = [1, 2, 3, 4, 5, 6]\nclassified = ['even' if x % 2 == 0 else 'odd' for x in numbers]\nprint(f\"Classified: {classified}\")\n\n# Cap values at 100\nscores = [85, 92, 105, 78, 110, 88]\ncapped = [score if score <= 100 else 100 for score in scores]\nprint(f\"Capped scores: {capped}\")\n\n# Absolute values using conditional\nvalues = [-5, 3, -2, 8, -1]\nabsolute = [x if x >= 0 else -x for x in values]\nprint(f\"Absolute: {absolute}\")\n\nprint(\"\\n=== Multiple Conditions ===\")\n\n# Filter: divisible by 2 AND divisible by 3\nnumbers = range(1, 31)\ndiv_by_6 = [x for x in numbers if x % 2 == 0 if x % 3 == 0]\nprint(f\"Divisible by 6: {div_by_6}\")\n\n# Same as: if x % 2 == 0 and x % 3 == 0\ndiv_by_6_alt = [x for x in numbers if x % 2 == 0 and x % 3 == 0]\nprint(f\"Alternative: {div_by_6_alt}\")\n\nprint(\"\\n=== Nested Loops in Comprehension ===\")\n\n# Cartesian product\ncolors = ['red', 'blue']\nsizes = ['S', 'M', 'L']\ncombinations = [f\"{color}-{size}\" for color in colors for size in sizes]\nprint(f\"Combinations: {combinations}\")\n\n# Flatten nested list\nnested = [[1, 2], [3, 4], [5, 6]]\nflattened = [num for sublist in nested for num in sublist]\nprint(f\"Flattened: {flattened}\")\n\n# Matrix operations\nmatrix = [\n    [1, 2, 3],\n    [4, 5, 6],\n    [7, 8, 9]\n]\n# Get all elements\nall_elements = [num for row in matrix for num in row]\nprint(f\"All elements: {all_elements}\")\n\n# Transpose matrix\ntransposed = [[row[i] for row in matrix] for i in range(3)]\nprint(f\"Transposed: {transposed}\")",
      "explanation": "**List comprehension syntax:**\n\n**Basic:**\n```python\n[expression for item in iterable]\n```\n\n**With filter:**\n```python\n[expression for item in iterable if condition]\n```\n\n**With conditional expression:**\n```python\n[expr1 if condition else expr2 for item in iterable]\n```\n\n**Nested:**\n```python\n[expression for outer in iterable1 for inner in iterable2]\n# Same as:\nfor outer in iterable1:\n    for inner in iterable2:\n        expression\n```\n\n**Key difference:**\n- Filter: `if` at end (no else)\n- Transform: `if/else` before `for`",
      "output": "=== Basic List Comprehension ===\nLoop: [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]\nComprehension: [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]\n\n=== Comprehension with Condition (Filter) ===\nEvens: [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]\nPositive: [2, 4, 6]\nLong words: ['python', 'cool']\n\n=== Comprehension with Transformation ===\nUppercase: ['A', 'THE', 'CAT', 'IN', 'HAT', 'PYTHON', 'IS', 'COOL']\nLengths: [1, 3, 3, 2, 3, 6, 2, 4]\nUser info: ['User: Alice (5 chars)', 'User: Bob (3 chars)', 'User: Charlie (7 chars)']\n\n=== Comprehension with if-else (Transform) ===\nClassified: ['odd', 'even', 'odd', 'even', 'odd', 'even']\nCapped scores: [85, 92, 100, 78, 100, 88]\nAbsolute: [5, 3, 2, 8, 1]\n\n=== Multiple Conditions ===\nDivisible by 6: [6, 12, 18, 24, 30]\nAlternative: [6, 12, 18, 24, 30]\n\n=== Nested Loops in Comprehension ===\nCombinations: ['red-S', 'red-M', 'red-L', 'blue-S', 'blue-M', 'blue-L']\nFlattened: [1, 2, 3, 4, 5, 6]\nAll elements: [1, 2, 3, 4, 5, 6, 7, 8, 9]\nTransposed: [[1, 4, 7], [2, 5, 8], [3, 6, 9]]"
    },
    {
      "type": "the_simplifier",
      "title": "Syntax Breakdown",
      "content": "**List comprehension patterns:**\n\n```python\n# 1. Basic transformation\n[x*2 for x in numbers]\n\n# 2. Filter only\n[x for x in numbers if x > 0]\n\n# 3. Transform with filter\n[x*2 for x in numbers if x > 0]\n\n# 4. Conditional transform (no filter)\n[x if x > 0 else 0 for x in numbers]\n\n# 5. Conditional transform AND filter\n[x*2 if x > 10 else x for x in numbers if x != 0]\n```\n\n**Dictionary comprehension:**\n```python\n{key: value for item in iterable}\n{x: x**2 for x in range(5)}\n# {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}\n```\n\n**Set comprehension:**\n```python\n{expression for item in iterable}\n{len(word) for word in words}\n# {3, 5, 6}  # Unique lengths\n```\n\n**When NOT to use:**\n```python\n# Bad - too complex\n[process(x, y) for x in data if validate(x) \n for y in x.items if y.type == 'special' \n if check(y)]\n\n# Better - use regular loop\nresults = []\nfor x in data:\n    if validate(x):\n        for y in x.items:\n            if y.type == 'special' and check(y):\n                results.append(process(x, y))\n```"
    },
    {
      "type": "the_coder",
      "title": "Code Example: Dict and Set Comprehensions",
      "code": "print(\"=== Dictionary Comprehension ===\")\n\n# Create dict from range\nsquares_dict = {x: x**2 for x in range(6)}\nprint(f\"Squares: {squares_dict}\")\n\n# From two lists\nnames = ['Alice', 'Bob', 'Charlie']\nages = [25, 30, 35]\npeople = {name: age for name, age in zip(names, ages)}\nprint(f\"People: {people}\")\n\n# Swap keys and values\noriginal = {'a': 1, 'b': 2, 'c': 3}\nswapped = {value: key for key, value in original.items()}\nprint(f\"Swapped: {swapped}\")\n\n# Filter dictionary\nscores = {'Alice': 95, 'Bob': 67, 'Charlie': 89, 'David': 45}\npassing = {name: score for name, score in scores.items() if score >= 70}\nprint(f\"Passing: {passing}\")\n\n# Transform values\ntemps_celsius = {'morning': 20, 'noon': 28, 'evening': 22}\ntemps_fahrenheit = {time: (temp * 9/5) + 32 \n                    for time, temp in temps_celsius.items()}\nprint(f\"Fahrenheit: {temps_fahrenheit}\")\n\nprint(\"\\n=== Set Comprehension ===\")\n\n# Unique squares\nnumbers = [1, 2, 3, 4, 5, 1, 2, 3]\nunique_squares = {x**2 for x in numbers}\nprint(f\"Unique squares: {unique_squares}\")\n\n# Unique word lengths\nsentence = \"the quick brown fox jumps over the lazy dog\"\nword_lengths = {len(word) for word in sentence.split()}\nprint(f\"Unique word lengths: {sorted(word_lengths)}\")\n\n# Unique first letters\nwords = ['apple', 'banana', 'apricot', 'blueberry', 'cherry']\nfirst_letters = {word[0] for word in words}\nprint(f\"First letters: {sorted(first_letters)}\")\n\nprint(\"\\n=== Practical Examples ===\")\n\n# Count word frequency\ntext = \"python is great and python is fun and python is powerful\"\nwords = text.split()\nword_count = {word: words.count(word) for word in set(words)}\nprint(f\"Word frequency: {word_count}\")\n\n# Group by property\nstudents = [\n    {'name': 'Alice', 'grade': 'A'},\n    {'name': 'Bob', 'grade': 'B'},\n    {'name': 'Charlie', 'grade': 'A'},\n    {'name': 'David', 'grade': 'C'},\n    {'name': 'Eve', 'grade': 'B'}\n]\n\n# Group names by grade\nby_grade = {}\nfor student in students:\n    grade = student['grade']\n    if grade not in by_grade:\n        by_grade[grade] = []\n    by_grade[grade].append(student['name'])\n\nprint(f\"\\nGrouped by grade: {by_grade}\")\n\n# Create lookup table\nproducts = [\n    {'id': 1, 'name': 'Widget', 'price': 9.99},\n    {'id': 2, 'name': 'Gadget', 'price': 19.99},\n    {'id': 3, 'name': 'Doohickey', 'price': 14.99}\n]\n\nproduct_lookup = {p['id']: p for p in products}\nprint(f\"\\nProduct lookup:\")\nfor pid, product in product_lookup.items():\n    print(f\"  {pid}: {product['name']} - ${product['price']}\")\n\n# Multi-level filtering and transformation\ndata = [\n    {'name': 'file1.py', 'size': 1024},\n    {'name': 'file2.txt', 'size': 2048},\n    {'name': 'file3.py', 'size': 512},\n    {'name': 'file4.txt', 'size': 128}\n]\n\n# Python files with size in KB\npy_files = {f['name']: f['size'] / 1024 \n            for f in data \n            if f['name'].endswith('.py')}\nprint(f\"\\nPython files (KB): {py_files}\")\n\nprint(\"\\n=== Combining Comprehensions ===\")\n\n# Matrix to dict of dicts\nmatrix = [\n    [1, 2, 3],\n    [4, 5, 6],\n    [7, 8, 9]\n]\n\n# Create dict: {row_index: {col_index: value}}\nmatrix_dict = {i: {j: val for j, val in enumerate(row)} \n               for i, row in enumerate(matrix)}\nprint(f\"Matrix as dict:\")\nfor row_idx, row_dict in matrix_dict.items():\n    print(f\"  Row {row_idx}: {row_dict}\")\n\n# Nested dict comprehension: grade statistics\ngrades = {\n    'Math': [85, 90, 78, 92],\n    'Science': [88, 76, 95, 84],\n    'English': [92, 89, 91, 88]\n}\n\nstats = {\n    subject: {\n        'avg': sum(scores) / len(scores),\n        'max': max(scores),\n        'min': min(scores)\n    }\n    for subject, scores in grades.items()\n}\n\nprint(f\"\\nGrade statistics:\")\nfor subject, stat in stats.items():\n    print(f\"  {subject}: avg={stat['avg']:.1f}, max={stat['max']}, min={stat['min']}\")",
      "explanation": "**Dictionary comprehension syntax:**\n```python\n{key_expr: value_expr for item in iterable}\n{key_expr: value_expr for item in iterable if condition}\n```\n\n**Set comprehension syntax:**\n```python\n{expression for item in iterable}\n{expression for item in iterable if condition}\n```\n\n**Practical patterns:**\n\n**1. Create lookup tables:**\n```python\nlookup = {item.id: item for item in items}\n```\n\n**2. Invert dictionaries:**\n```python\ninverted = {v: k for k, v in orig.items()}\n```\n\n**3. Filter dictionaries:**\n```python\nfiltered = {k: v for k, v in d.items() if condition}\n```\n\n**4. Get unique values:**\n```python\nunique = {item.property for item in items}\n```",
      "output": "=== Dictionary Comprehension ===\nSquares: {0: 0, 1: 1, 2: 4, 3: 9, 4: 16, 5: 25}\nPeople: {'Alice': 25, 'Bob': 30, 'Charlie': 35}\nSwapped: {1: 'a', 2: 'b', 3: 'c'}\nPassing: {'Alice': 95, 'Charlie': 89}\nFahrenheit: {'morning': 68.0, 'noon': 82.4, 'evening': 71.6}\n\n=== Set Comprehension ===\nUnique squares: {1, 4, 9, 16, 25}\nUnique word lengths: [3, 4, 5]\nFirst letters: ['a', 'b', 'c']\n\n=== Practical Examples ===\nWord frequency: {'python': 3, 'is': 3, 'great': 1, 'and': 2, 'fun': 1, 'powerful': 1}\n\nGrouped by grade: {'A': ['Alice', 'Charlie'], 'B': ['Bob', 'Eve'], 'C': ['David']}\n\nProduct lookup:\n  1: Widget - $9.99\n  2: Gadget - $19.99\n  3: Doohickey - $14.99\n\nPython files (KB): {'file1.py': 1.0, 'file3.py': 0.5}\n\n=== Combining Comprehensions ===\nMatrix as dict:\n  Row 0: {0: 1, 1: 2, 2: 3}\n  Row 1: {0: 4, 1: 5, 2: 6}\n  Row 2: {0: 7, 1: 8, 2: 9}\n\nGrade statistics:\n  Math: avg=86.2, max=92, min=78\n  Science: avg=85.8, max=95, min=76\n  English: avg=90.0, max=92, min=88"
    },
    {
      "type": "the_coder",
      "title": "Interactive Exercise",
      "instruction": "Given a list of transactions, create:\n1. Dict of total spending per category (dict comprehension)\n2. Set of unique categories (set comprehension)\n3. List of transaction descriptions for amounts > 50 (list comprehension)",
      "starter_code": "transactions = [\n    {'amount': 45.50, 'category': 'food', 'desc': 'Grocery shopping'},\n    {'amount': 12.00, 'category': 'transport', 'desc': 'Bus fare'},\n    {'amount': 78.90, 'category': 'food', 'desc': 'Restaurant'},\n    {'amount': 100.00, 'category': 'entertainment', 'desc': 'Concert'},\n    {'amount': 25.00, 'category': 'transport', 'desc': 'Taxi'},\n    {'amount': 55.00, 'category': 'food', 'desc': 'Takeout'}\n]\n\n# TODO: Create dict of total per category\ntotals_by_category = {}\n\n# TODO: Create set of unique categories\ncategories = set()\n\n# TODO: Create list of descriptions for amounts > 50\nlarge_transactions = []\n\nprint(f\"Totals: {totals_by_category}\")\nprint(f\"Categories: {categories}\")\nprint(f\"Large: {large_transactions}\")",
      "hint": "For totals: group by category and sum amounts. Use sum() with a generator expression."
    },
    {
      "type": "the_coder",
      "title": "Solution",
      "solution_code": "transactions = [\n    {'amount': 45.50, 'category': 'food', 'desc': 'Grocery shopping'},\n    {'amount': 12.00, 'category': 'transport', 'desc': 'Bus fare'},\n    {'amount': 78.90, 'category': 'food', 'desc': 'Restaurant'},\n    {'amount': 100.00, 'category': 'entertainment', 'desc': 'Concert'},\n    {'amount': 25.00, 'category': 'transport', 'desc': 'Taxi'},\n    {'amount': 55.00, 'category': 'food', 'desc': 'Takeout'}\n]\n\nprint(\"=== Basic Solution ===\")\n\n# Get unique categories first\nall_categories = {t['category'] for t in transactions}\n\n# Calculate totals per category\ntotals_by_category = {\n    category: sum(t['amount'] for t in transactions if t['category'] == category)\n    for category in all_categories\n}\n\n# Unique categories (set comprehension)\ncategories = {t['category'] for t in transactions}\n\n# Large transactions (list comprehension)\nlarge_transactions = [t['desc'] for t in transactions if t['amount'] > 50]\n\nprint(f\"Totals by category: {totals_by_category}\")\nprint(f\"Unique categories: {categories}\")\nprint(f\"Large transactions: {large_transactions}\")\n\nprint(\"\\n=== Enhanced Solution with More Analysis ===\")\n\n# Average per category\navg_by_category = {\n    category: sum(t['amount'] for t in transactions if t['category'] == category) /\n              len([t for t in transactions if t['category'] == category])\n    for category in all_categories\n}\n\nprint(f\"\\nAverage by category:\")\nfor cat, avg in avg_by_category.items():\n    print(f\"  {cat}: ${avg:.2f}\")\n\n# Count transactions per category\ncount_by_category = {\n    category: len([t for t in transactions if t['category'] == category])\n    for category in all_categories\n}\n\nprint(f\"\\nTransaction count:\")\nfor cat, count in count_by_category.items():\n    print(f\"  {cat}: {count}\")\n\n# Categorize transactions by amount range\namount_ranges = {\n    'small': [t for t in transactions if t['amount'] < 30],\n    'medium': [t for t in transactions if 30 <= t['amount'] <= 70],\n    'large': [t for t in transactions if t['amount'] > 70]\n}\n\nprint(f\"\\nBy amount range:\")\nfor range_name, trans in amount_ranges.items():\n    print(f\"  {range_name}: {len(trans)} transactions\")\n    for t in trans:\n        print(f\"    - ${t['amount']:.2f}: {t['desc']}\")\n\n# Most expensive per category\nmost_expensive = {\n    category: max(\n        (t for t in transactions if t['category'] == category),\n        key=lambda x: x['amount']\n    )\n    for category in all_categories\n}\n\nprint(f\"\\nMost expensive per category:\")\nfor cat, transaction in most_expensive.items():\n    print(f\"  {cat}: ${transaction['amount']:.2f} - {transaction['desc']}\")\n\n# Complete statistics dict\nstats = {\n    category: {\n        'total': sum(t['amount'] for t in transactions if t['category'] == category),\n        'count': len([t for t in transactions if t['category'] == category]),\n        'avg': sum(t['amount'] for t in transactions if t['category'] == category) /\n               len([t for t in transactions if t['category'] == category]),\n        'max': max(t['amount'] for t in transactions if t['category'] == category),\n        'min': min(t['amount'] for t in transactions if t['category'] == category)\n    }\n    for category in all_categories\n}\n\nprint(f\"\\nComplete statistics:\")\nfor category, stat in stats.items():\n    print(f\"\\n  {category.upper()}:\")\n    print(f\"    Total: ${stat['total']:.2f}\")\n    print(f\"    Count: {stat['count']}\")\n    print(f\"    Average: ${stat['avg']:.2f}\")\n    print(f\"    Max: ${stat['max']:.2f}\")\n    print(f\"    Min: ${stat['min']:.2f}\")",
      "explanation": "**Solution breakdown:**\n\n**1. Dictionary comprehension for totals:**\n```python\n{category: sum(amounts) for category in categories}\n```\nGroups transactions and sums amounts\n\n**2. Set comprehension for unique categories:**\n```python\n{t['category'] for t in transactions}\n```\nAutomatically deduplicates\n\n**3. List comprehension with filter:**\n```python\n[t['desc'] for t in transactions if t['amount'] > 50]\n```\nFilters and extracts descriptions\n\n**Advanced patterns:**\n- Nested generator expressions for aggregation\n- max/min with key functions\n- Multi-level dictionaries\n- Complex filtering and grouping\n\n**Real-world applications:**\n- Data analysis\n- Reporting\n- ETL transformations\n- Data cleaning",
      "output": "=== Basic Solution ===\nTotals by category: {'food': 179.4, 'transport': 37.0, 'entertainment': 100.0}\nUnique categories: {'food', 'transport', 'entertainment'}\nLarge transactions: ['Restaurant', 'Concert', 'Takeout']\n\n=== Enhanced Solution with More Analysis ===\n\nAverage by category:\n  food: $59.80\n  transport: $18.50\n  entertainment: $100.00\n\nTransaction count:\n  food: 3\n  transport: 2\n  entertainment: 1\n\nBy amount range:\n  small: 2 transactions\n    - $12.00: Bus fare\n    - $25.00: Taxi\n  medium: 2 transactions\n    - $45.50: Grocery shopping\n    - $55.00: Takeout\n  large: 2 transactions\n    - $78.90: Restaurant\n    - $100.00: Concert\n\nMost expensive per category:\n  food: $78.90 - Restaurant\n  transport: $25.00 - Taxi\n  entertainment: $100.00 - Concert\n\nComplete statistics:\n\n  FOOD:\n    Total: $179.40\n    Count: 3\n    Average: $59.80\n    Max: $78.90\n    Min: $45.50\n\n  TRANSPORT:\n    Total: $37.00\n    Count: 2\n    Average: $18.50\n    Max: $25.00\n    Min: $12.00\n\n  ENTERTAINMENT:\n    Total: $100.00\n    Count: 1\n    Average: $100.00\n    Max: $100.00\n    Min: $100.00",
      "common_mistakes": [
        "Using comprehensions for complex logic (use regular loops instead)",
        "Forgetting that sets and dicts can't have duplicate keys",
        "Confusing filter (if at end) with conditional expression (if before for)",
        "Making comprehensions too long and unreadable",
        "Using comprehensions with side effects (printing, modifying state)"
      ]
    },
    {
      "type": "key_takeaways",
      "title": "Key Takeaways",
      "takeaways": [
        "**List comprehension:** [expr for item in iterable if condition]",
        "**Dict comprehension:** {key: value for item in iterable}",
        "**Set comprehension:** {expr for item in iterable} - auto deduplicates",
        "**Filter at end:** if condition (no else)",
        "**Transform before for:** expr1 if cond else expr2",
        "**Nested comprehensions:** for x in a for y in b (reads left to right)",
        "**Use for simple operations** - Complex logic needs regular loops",
        "**More Pythonic and often faster** than equivalent loops"
      ]
    }
  ],
  "checkpoint_quiz": {
    "questions": [
      {
        "id": 1,
        "type": "multiple_choice",
        "question": "What's the difference between [x for x in items if x > 0] and [x if x > 0 else 0 for x in items]?",
        "options": [
          "No difference",
          "First filters (excludes items), second transforms (keeps all items)",
          "Second is invalid syntax",
          "First is faster"
        ],
        "correct_answer": 1,
        "explanation": "The first filters out items not meeting the condition. The second transforms all items - positive numbers stay the same, others become 0."
      },
      {
        "id": 2,
        "type": "multiple_choice",
        "question": "What does {word[0] for word in words} create?",
        "options": [
          "A list of first letters",
          "A set of unique first letters",
          "A dict with first letters as keys",
          "A tuple of first letters"
        ],
        "correct_answer": 1,
        "explanation": "Curly braces {} with a single expression create a set comprehension, which automatically keeps only unique values."
      },
      {
        "id": 3,
        "type": "multiple_choice",
        "question": "When should you avoid using comprehensions?",
        "options": [
          "Never - always use them",
          "When the logic is complex or involves side effects",
          "When iterating over lists",
          "When you need speed"
        ],
        "correct_answer": 1,
        "explanation": "Avoid comprehensions for complex logic (hard to read) or side effects (printing, file I/O). Use regular loops for better clarity in these cases."
      }
    ]
  }
}
